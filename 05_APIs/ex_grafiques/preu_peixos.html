
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gràfic preu peixos</title>

    <!-- jQuery + jQuery UI -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="http://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <!-- Charist -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>

    <style>
        .llegenda_color1{
            background-color: blueviolet;
        }
    </style>

</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col">
                <h1>Evolució del preu del peix</h1>

                <!-- Files amb els selectors -->
                <div class="row">
                    <div class="col-1 ">
                        col
                    </div>
                    <div class="col">
                        <select name="" id="desplegable1">
                            <option value="">Ossis blau</option>
                            <option value="">Ossis blanc</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-1">
                        col
                    </div>
                    <div class="col">
                        <select name="" id="">
                            <option value="">PEIX1</option>
                            <option value="">PEIX2</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-1">
                        col
                    </div>
                    <div class="col">
                        <select name="" id="">
                            <option value="">PEIX1</option>
                            <option value="">PEIX2</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-1">
                        col
                    </div>
                    <div class="col">
                        <select name="" id="">
                            <option value="">PEIX1</option>
                            <option value="">PEIX2</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-1">
                        col
                    </div>
                    <div class="col">
                        <select name="" id="">
                            <option value="">PEIX1</option>
                            <option value="">PEIX2</option>
                        </select>
                    </div>
                </div>

                <!-- Resultat/gràfic -->
                <div class="row">
                    <div class="col">
                        <div class="ct-chart ct-perfect-fourth"></div>
                    </div>

                </div>

            </div>
        </div>
    </div>

    <script language="JavaScript">

        $(function(){

            $("select").change(function(){
                // Variables globals
                adreca = "https://analisi.transparenciacatalunya.cat/resource/ge3m-4jgm.json"

                var grups = [];

                $.get(adreca, function(data, status){
                    var info_peixos = data; 
                    var i = 0; 
                    var info_peix = "";

                     
                    

                    for(i = 0; i<info_peixos.length; i++){
                        info_peix = data[i];

                        //Agafa'm grups i puja'ls a l'array: 
                        if(($.inArray(info_peix.grup, grups)) == -1){
                            grups.push(info_peix.grup);
                        }
                    }

                    for(i=0; i<grups.length; i++){
                        $("#desplegable1").append(
                            "<option value=" + grups[i] + ">" + grups[i] +"</option>"
                        )
                    }

                    
                    
                });
            });
            


            //Gràfic: 
            new Chartist.Line('.ct-chart', {
                labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
                series: [
                    [12, 9, 7, 8, 5],
                    [2, 1, 3.5, 7, 3],
                    [1, 3, 4, 5, 6]
                ]
                }, {
                fullWidth: true,
                chartPadding: {
                    right: 40
                }
            });

        });


        

    </script>
</body>
</html>